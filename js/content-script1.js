!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=5)}([function(t,e,a){"use strict";a.d(e,"r",function(){return i}),a.d(e,"f",function(){return c}),a.d(e,"m",function(){return s}),a.d(e,"e",function(){return d}),a.d(e,"s",function(){return l}),a.d(e,"o",function(){return p}),a.d(e,"c",function(){return u}),a.d(e,"g",function(){return v}),a.d(e,"i",function(){return m}),a.d(e,"h",function(){return h}),a.d(e,"k",function(){return y}),a.d(e,"b",function(){return I}),a.d(e,"p",function(){return f}),a.d(e,"j",function(){return b}),a.d(e,"l",function(){return g}),a.d(e,"a",function(){return x}),a.d(e,"d",function(){return w}),a.d(e,"n",function(){return O}),a.d(e,"q",function(){return R});var n=a(1),r=function(){var t=localStorage.valueOf(),e="";for(var a in t)if(-1!=a.indexOf("//sycm.taobao.com/portal/common/commDate.json?targetUrl=http://sycm.taobao.com/mc")){e=t[a];break}if(!e)return"";var n=JSON.parse(e).split("|")[1];return JSON.parse(n).value._d}();function i(t,e){var a=t,n=o("yyyy-MM-dd",new Date(a));return"day"==e?n+"|"+n:"recent7"==e?o("yyyy-MM-dd",new Date(a-5184e5))+"|"+n:o("yyyy-MM-dd",new Date(a-25056e5))+"|"+n}function o(t,e){if(!e)return"";var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}function c(t,e,a){return"undefined"!=t&&""!==t&&"-"!=t&&e&&"-"!=e&&"0"!=e?(t=(t+"").replace(",",""),e=(e+"").replace(",",""),1==a?(Math.round(t/e*100)/100).toFixed(2):2==a?(Math.round(t/e*1e4)/100).toFixed(2)+"%":void 0):"-"}function s(t,e){return 0==t?0:t&&"-"!=t?(t=(t+"").replace(",",""),"inter"==e?Math.round(t):"precent"==e&&-1!==t.indexOf("%")?t.slice(0,-1)/100:t):"-"}function d(t){return-1!==(t=(t+"").replace(",","")).indexOf("%")?t.slice(0,-1)/100:t}function l(t){var e=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/.test(t),a=/^\d+$/.test(t),n="";return e?(t.split("?")[1].split("&").forEach(function(t){var e=t.split("=");"id"==e[0]&&(n=e[1])}),n):!!a&&t}function p(t,e,a){t=(t+"").replace(",",""),e=(e+"").replace(",",""),a=(a+"").replace(",","");var n={num1:0,num2:0};return t&&e&&"-"!=t&&"-"!=e&&"0"!=e?a&&"-"!=a?(n.num1=Math.round(t*e/100),n.num2=n.num1?Math.round(a/n.num1*100).toFixed(2)/100:"-"):(n.num1=Math.round(t*e/100),n.num2="-"):(n.num1="-",n.num2="-"),n}function u(t,e,a){var n={res1:0,res2:0};if(t&&"-"!=t&&e&&"-"!=e){t=(t+"").replace(",",""),e=(e+"").replace(",","").slice(0,-1),a=(a+"").replace(",","");var r=t*e;n.res1=Math.round(r/100),n.res2="-"==a?"-":r?Math.round(a/r*1e4)/100:"-"}else n.res1="-",n.res2="-";return n}function v(t){var e=r.updateNDay,a=r.update1Day,n="moreDay"==t?e:a;return(n?new Date(n).getTime():localStorage.getItem("currentDate")?JSON.parse(localStorage.getItem("currentDate")).data.timestamp:"")||(new Date).getTime()}function m(){var t=localStorage.getItem("shopCateId"),e=JSON.parse(localStorage.getItem("tree_history_op-mc._cate_picker")).split("|")[1],a=e?JSON.parse(e).value:"";return a?a[0].realObj.cateLevel1Id:t}function h(t,e){for(var a=[],n=e||"yyyy-MM-dd",r=1;r<31;r++)a.unshift(o(n,new Date(t-864e5*r)));return a}function y(t,e,a,n){var r=$(".oui-date-picker .ant-btn-primary").text(),o="实 时"==r?"today":"7天"==r?"recent7":"30天"==r?"recent30":"日"==r?"day":"周"==r?"week":"月"==r?"month":"today",c=$(".ebase-FaCommonFilter__root .fa-common-filter-device-select .oui-select-container-value").html(),s=$(".ebase-FaCommonFilter__root .sellerType-select .ant-select-selection-selected-value").attr("title"),d="所有终端"==c?"0":"PC端"==c?"1":"无线端"==c?"2":"",l="全部"==s?"-1":"天猫"==s?"1":"淘宝"==s?"0":"",p=$(".ebase-FaCommonFilter__root .oui-date-picker .oui-date-picker-current-date").text().split(" "),u=p.length,h="";3==u||2==u?h=p[1]+"|"+p[1]:4==u&&(h=n?p[3]+"|"+p[3]:p[1]+"|"+p[3]),e=e||1,a=a||10,"allTrend"==t&&(h=i(v(),"day"));var y=m();return n?t+"cateId="+y+"&dateRange="+h+"&dateType=day&device="+d+"&sellerType="+l:t+"cateId="+y+"&dateRange="+h+"&dateType="+o+"&device="+d+"&page="+e+"&pageSize="+a+"&sellerType="+l}function I(t){if(!t)return $(".load-pop").fadeOut(100),!1;var e=$(".load-pop");e.length&&e.fadeIn(200),$("body").append('<div class="load-pop"><div class="spinner"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>')}function f(t,e,a){$("#app").append('<div class="small-alert" style="'+e+'">'+t+"</div>"),setTimeout(function(){$("#app .small-alert").fadeOut(300)},500)}function b(){for(var t=$("#itemAnalysisSelect .sycm-common-select-wrapper .alife-dt-card-sycm-common-select"),e={selfItem:{imgurl:"",title:""},rivalItem1:{imgurl:"",title:""},rivalItem2:{imgurl:"",title:""},totalNum:0},a=0;a<3;a++){var n=$(t[a]).find(".sycm-common-select-selected-title"),r=$(t[a]).find(".sycm-common-select-selected-image-wrapper img");if(n.length){var i=n?n.attr("title"):"",o=r?r.attr("src"):"";e.totalNum+=1,0==a?(e.selfItem.imgurl=o,e.selfItem.title=i):1==a?(e.rivalItem1.imgurl=o,e.rivalItem1.title=i):2==a&&(e.rivalItem2.imgurl=o,e.rivalItem2.title=i)}}return e}function g(t,e,a){var n=localStorage.getItem("chaqz_compareSelfList")||function(){var t=JSON.parse(localStorage.getItem("/mc/rivalShop/recommend/item.json"));return x(t?JSON.parse(t.split("|")[1]).value._d:"")}(),r=e.getMonitoredList.data;if(!n||!r.length)return f("获取竞品数据失败，请刷新重试！"),I(),!1;for(var i=JSON.parse(n),o=JSON.parse(r),c={item1:"",item2:"",self:""},s="",d="",l="",p=0;p<i.length;p++)i[p].title==t.selfItem.title&&(l="&selfItemId="+i[p].itemId,c.self=i[p]);for(var u=0;u<o.length;u++)o[u].name==t.rivalItem1.title?(c.item1=o[u],s="&rivalItem1Id="+o[u].itemId):o[u].name==t.rivalItem2.title&&(c.item2=o[u],d="&rivalItem2Id="+o[u].itemId);return"idObj"==a?c:s+d+l}function x(t){var e=CryptoJS.enc.Utf8.parse("sycmsycmsycmsycm"),a=CryptoJS.enc.Utf8.parse("mcysmcysmcysmcys");let n=CryptoJS.enc.Hex.parse(t),r=CryptoJS.enc.Base64.stringify(n);return CryptoJS.AES.decrypt(r,e,{iv:a,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8).toString()}function w(){var t=localStorage.getItem("chaqz_shopInfo");return t?JSON.parse(t).data:""}function O(){var t=window.SAVE_MEMBER2;if(!t)return R.init("noShopInfo"),!1;var e=t.member,a=window.SAVE_BIND2,n=w();if(!e.level)return R.init("orderMem"),!1;var r=t.time,i=e.expireAt;if(new Date(i)-1e3*r<=0)return R.init("overdue"),!1;var o=a.data.length,c=a.count,s=!1,d=!1,l=0;return a.data.forEach(function(t){t.runShopId==n.runAsShopId&&(s=!0,d=t.closed),0==t.closed&&l++}),s?0==d||(l<c?(R.init("active2"),!1):e.level<4?(R.init("upLimit"),!1):(R.init("bindLimit"),!1)):o<c?(R.init("binding"),!1):e.level<4?(R.init("upLimit"),!1):(R.init("bindLimit"),!1)}var R={version:'<p class="tips">当前插件已更新，请到官网下载最新版本。</p><div class="cha-btns"><a class="btn" href="'+n.a+'/pluginIntro" target="_blank"><button class="btn">前往下载</button></a></div>',orderMem:'<p class="tips">账户未开通会员，请联系客服或订购会员。</p><div class="cha-btns"><a class="mr_30 btn" href="tencent://message/?uin=3531553166&amp;Site=qq&amp;Menu=yes"><button class="btn">联系客服</button></a><button class="btn buyBtn">订购</button></div>',overdue:'<p class="tips">会员已过期，请重新订购。</p><div class="cha-btns"><button class="btn buyBtn">订购</button></div>',overdue2:'<p class="tips">登录账户未绑定本店铺，<br>如有疑问请联系客服。</p><div class="cha-btns"><a class="mr_30 btn" href="tencent://message/?uin=3531553166&amp;Site=qq&amp;Menu=yes" ><button class="btn">联系客服</button></a><button class="btn hides">取消</button></div>',binding:'<p class="tips">店铺暂未绑定，是否绑定店铺？</p><div class="cha-btns"><button class="hides mr_30 btn">取消</button><button id="goBind" class="btn">绑定</button></div>',nonBind:'<p class="tips">店铺已绑定其余账户，<br>若非本人操作请联系客服。</p><div class="cha-btns"><a class="mr_30 btn" href="tencent://message/?uin=3531553166&amp;Site=qq&amp;Menu=yes" ><button class="btn">联系客服</button></a><button class="btn hides">确定</button></div>',renewal:'<p class="tips"> 会员已过期， 为不影响正常使用，<br>请前往官网续费。</p><div class="cha-btns"><button class="cancel mr_30 btn">暂不处理</button><button class="btn">续费</button></div>',orderSucc:'<p class="tips">若订购成功请刷新。</p><div class="cha-btns"><button id="pageRefresh" class="btn">确定</button></div>',noShopInfo:'<p class="tips">未获取用户信息，请刷新页面重试。</p><div class="cha-btns"><button id="pageRefresh" class="btn">确定</button></div>',upLimit:'<p class="tips">该账户会员已达绑定上限，请升级会员。</p><div class="cha-btns"><button class="btn buyBtn">升级会员</button></div>',bindLimit:'<p class="tips">已达插件绑定上限，请联系客服。</p><div class="cha-btns"><a class="mr_30 btn" href="tencent://message/?uin=3531553166&amp;Site=qq&amp;Menu=yes" ><button class="btn">联系客服</button></div>',weixin:'<p class="head">查权重客服很高兴为您服务</p><img src="https://file.cdn.chaquanzhong.com/wx_contact.jpg" alt="wx"><p class="foot">微信扫一扫 添加客服</p>',goChoose:'<p class="tips">请在竞品分析界面，选择目标竞品。</p><div class="cha-btns"><button class="btn hides">确定</button></div>',onlyOne:'<p class="tips">竞品选择有误，现仅支持单项竞品加权。</p><div class="cha-btns"><button class="btn hides">确定</button></div>',competingGoodsAnalysis:'<p class="head-title">竞品分析</p><div class="analy-goods"><input type="text" class="anayEditor selcet" placeholder="请输入url或者商品id"><p class="good-tips"></p></div><div class="cha-btns"><button class="btn analyBtn">数据解析</button><button class="btn analyBtn">流量解析</button><button class="btn analyBtn">关键词解析</button></div>',competingTopAnalysis:'<p class="head-title">权重解析</p><div class="analy-goods"><input type="text" class="anayEditor selcet" placeholder="请输入url或者商品id"><p class="good-tips"></p></div><div class="cha-btns"><button class="btn hides mr_30 cancel">取消</button><button class="btn analyBtn2">确定</button></div><p class="bot-tips">暂只支持同类目权重解析</p>',selectPlan:function(t){var e="";return t?t.forEach(function(t){e+='<option value="'+t.title+'">'+t.title+"</option>"}):e+='<option value="0">请选择</option>','<p class="head-title">加入加权计划</p><div class="form-list"><div><span>计划名称</span><select class="selcet" placeholder="请选择">'+e+'</select></div><p class="ctPlan">创建新计划</p></div><div class="cha-btns"><button id="vestBtn" class="btn">确定</button></div>'},createPlan:'<p class="head-title" id="giveupPlan">新建计划</p><div class="form-list"><div class="item"><span>计划目的</span><select class="selcet"><option value="新品">新品</option></select></div><div><span>计划名称</span><input type="text" class="editor selcet" placeholder="请输入计划名称"></div></div><div class="cha-btns"><button class="btn planBtn">确定</button></div>',active2:function(){for(var t=SAVE_BIND.data,e=t.length,a="",n=0;n<e;n++)if(t[n]){var r=t[n].closed,i=t[n].mainUname,o=1==r?"未激活":"已激活",c=n+1,s="label"+c;a+='<tr><td><label for="'+s+'" class="'+(1==r?"":"chose")+'"></label><input id='+s+' type="checkbox" '+(1==r?"":"checked disabled")+' data-id="'+t[n].runShopId+'" hidden><span class="num">'+c+"</span></td><td>"+i+"</td><td>"+o+"</td></tr>"}return'<div class="chaqz-info-wrapper pop"><div class="c-cont"><span class="close hides" click="hideInfo">×</span><div class="alert"><div class="table-wrap"><table><thead><tr><td>序号</td><td>店铺名</td><td>状态</td></tr></thead><tbody>'+a+'</tbody></table></div><div class="cha-btns"><button class="btn activeShop">激活</button></div><p class="foot-tips">如有绑定疑问，请<a href="tencent://message/?uin=3531553166&amp;Site=qq&amp;Menu=yes">联系客服</a></p></div></div></div>'},init:function(t,e){if($(".chaqz-info-wrapper.pop").length)return this.changeDom(t,e),!1;var a='<div class="chaqz-info-wrapper pop"><div class="c-cont"><span class="close hides" click="hideInfo">×</span><div class="alert">'+("function"==typeof this[t]?this[t](e):this[t])+"</div></div></div>",r=this;$("#app").append(a),$(".chaqz-info-wrapper.pop").on("click",".buyBtn",function(){window.open(n.a+"/homePage?from=plugin"),r.init("orderSucc")}),$(".chaqz-info-wrapper.pop").on("click","#pageRefresh",function(){window.location.reload()}),$(document).on("click",".chaqz-info-wrapper.pop .ctPlan",function(){r.init("createPlan")}),$(document).on("blur",".chaqz-info-wrapper.pop .editor",function(){if($(this).val().length>8)return $(this).val($(this).val().slice(0,8)),f("最多可输入8个汉字","top:10%;"),!1}),$(document).on("blur",".chaqz-info-wrapper.pop .anayEditor",function(){$(this).siblings(".good-tips").removeClass("alert")}),$(document).on("click",".chaqz-info-wrapper.pop .contactService",function(){r.init("weixin")})},changeDom:function(t,e){var a;a="function"==typeof this[t]?this[t](e):this[t],$(".chaqz-info-wrapper.pop .c-cont .alert").html(a),$(".chaqz-info-wrapper.pop").show()}}},function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return i});var n={monitShop:{urlReg:"https://sycm.taobao.com/mc(/live/|/)ci/shop/monitor/listShop.json",data:[]},monitFood:{urlReg:"https://sycm.taobao.com/mc(/live/|/)ci/item/monitor/list.json",data:{}},monitCompareFood:{urlReg:"https://sycm.taobao.com/mc/rivalItem/analysis/get(LiveCore|Core)Indexes.json",data:[]},monitResource:{urlReg:"https://sycm.taobao.com/mc/rivalItem/analysis/get(LiveFlow|Flow)Source.json",data:[]},marketShop:{urlReg:"https://sycm.taobao.com/mc(/live/|/)ci/shop/monitor/list.json",data:[]},marketHotShop:{urlReg:"https://sycm.taobao.com/mc/mq/monitor/cate(.*?)/showTopShops.json",data:[]},marketHotFood:{urlReg:"https://sycm.taobao.com/mc/mq/monitor/cate(.*?)/showTopItems.json",data:[]},shopInfo:{urlReg:"https://sycm.taobao.com/custom/menu/getPersonalView.json",data:[]},compareSelfList:{urlReg:"https://sycm.taobao.com/mc/rivalShop/recommend/item.json",data:[]},getMonitoredList:{urlReg:"https://sycm.taobao.com/mc/ci/config/rival/item/getMonitoredList.json",data:[]},getKeywords:{urlReg:"https://sycm.taobao.com/mc/rivalItem/analysis/getKeywords.json",data:[]},hotsale:{urlReg:"https://sycm.taobao.com/mc/mq/mkt/rank/(shop|item|brand)/hotsale.json",data:[]},hotsearch:{urlReg:"https://sycm.taobao.com/mc/mq/mkt/rank(.*?)hotsearch.json",data:[]},hotpurpose:{urlReg:"https://sycm.taobao.com/mc/mq/mkt/rank/item/hotpurpose.json",data:[]},trendShop:{urlReg:"https://sycm.taobao.com/mc/ci/config/rival/(shop|item|brand)/getSingleMonitoredInfo.json",data:[]},allTrend:{urlReg:"https://sycm.taobao.com/mc/ci/(shop|item|brand)/trend.json",data:[]},currentDate:{urlReg:"https://sycm.taobao.com/ipoll/activity/getCurrentTime.json"}},r="http://www.chaquanzhong.com",i="1.0.6"},function(t,e,a){"use strict";a.d(e,"a",function(){return u});var n=a(1),r=a(0),i=0,o={payRate:[],tradeIndex:[],payByr:[],uvIndex:[],seIpv:[],cartHit:[],cltHit:[]};function c(t,e,a,c,s,d,l){var p="payRate"==e||"payRateIndex"==e?1:"tradeIndex"==e?2:"payByr"==e||"payByrCntIndex"==e?3:"uvIndex"==e?4:"seIpv"==e||"seIpvUvHits"==e?5:"cartHit"==e||"cartHits"==e?6:"cltHit"==e||"cltHits"==e?7:"",u=localStorage.getItem("chaqz_token");chrome.runtime.sendMessage({key:"getData",options:{url:n.a+"/api/v1/plugin/flowFormula?type="+p,type:"POST",contentType:"application/json,charset=utf-8",headers:{Authorization:"Bearer "+u},data:JSON.stringify({exponent:t})}},function(t){if(i++,200==t.code?l?o[l][e]=t.data:o[e]=t.data:2030==t.code&&(LogOut(),i=0),i>c-1){var n="monitShop"==s?function(t){for(var e=[],a=o.payRate.length,n=0;n<a;n++){var i={shop:{}},c=t[n].cate_cateRankId;i.shop={title:t[n].shop.title,url:t[n].shop.pictureUrl},i.cate_cateRankId=c&&c.value?c.value:"-",i.tradeIndex=Math.round(o.tradeIndex[n]),i.uvIndex=Math.round(o.uvIndex[n]),i.seIpv=Math.round(o.seIpv[n]),i.cltHit=Math.round(o.cltHit[n]),i.cartHit=Math.round(o.cartHit[n]),i.payRate=o.payRate[n].toFixed(2)+"%",i.payByr=Object(r.m)(o.payByr[n],"inter"),i.kdPrice=Object(r.f)(o.tradeIndex[n],o.payByr[n],1),i.uvPrice=Object(r.f)(o.tradeIndex[n],o.uvIndex[n],1),i.searRate=Object(r.f)(o.seIpv[n],o.uvIndex[n],2),i.scRate=Object(r.f)(o.cltHit[n],o.uvIndex[n],2),i.jgRate=Object(r.f)(o.cartHit[n],o.uvIndex[n],2),e.push(i)}return e}(d):"monitFood"==s?function(t){for(var e=[],a=o.payRate.length,n=0;n<a;n++){var i,c=Object(r.m)(o.payRate[n],"precent"),s=Object(r.m)(o.uvIndex[n]);i="-"==c||"-"==s?"-":Math.round(c*s/100);var d={shop:{}},l=t[n].cateRankId;d.shop={title:t[n].item.title,url:t[n].item.pictUrl},d.cate_cateRankId=l?l.value:"-",d.tradeIndex=Math.round(o.tradeIndex[n]),d.uvIndex=Math.round(o.uvIndex[n]),d.seIpv=Math.round(o.seIpv[n]),d.cltHit=Math.round(o.cltHit[n]),d.cartHit=Math.round(o.cartHit[n]),d.payRate=o.payRate[n].toFixed(2)+"%",d.payByr=i,d.kdPrice=Object(r.f)(o.tradeIndex[n],i,1),d.uvPrice=Object(r.f)(o.tradeIndex[n],o.uvIndex[n],1),d.searRate=Object(r.f)(o.seIpv[n],o.uvIndex[n],2),d.scRate=Object(r.f)(o.cltHit[n],o.uvIndex[n],2),d.jgRate=Object(r.f)(o.cartHit[n],o.uvIndex[n],2),e.push(d)}return e}(d):"monitCompareFood"==s?o:"monitResource"==s?{value:o,final:d}:"marketShop"==s?{value:o,final:d}:"marketHotShop"==s?{value:o,final:d}:{value:o};i=0,a(n)}})}function s(t,e){if(t){var a=$(".oui-date-picker .ant-btn-primary").text(),n=JSON.parse(t);return"实 时"!=a?n:n.data.data?n.data.data:n.data}return""}function d(t,e){if(t){if("page"==e){var a=$(".oui-date-picker .ant-btn-primary").text(),n=JSON.parse(t);return"实 时"!=a?n:n.data.data.data?n.data.data:n.data}return a=$(".oui-date-picker .ant-btn-primary").text(),n=JSON.parse(t),"实 时"!=a?n:n.data.data.data?n.data.data.data:n.data.data}return""}function l(t){t&&t.forEach(t=>{var e=t.payRateIndex?t.payRateIndex.value:0,a=t.tradeIndex?t.tradeIndex.value:0,n=t.payByrCntIndex?t.payByrCntIndex.value:0,r=t.uvIndex?t.uvIndex.value:0,i=t.seIpvUvHits?t.seIpvUvHits.value:0,c=t.cartHits?t.cartHits.value:0,s=t.cltHits?t.cltHits.value:0;o.payRate.push(e),o.tradeIndex.push(a),o.payByr.push(n),o.uvIndex.push(r),o.seIpv.push(i),o.cartHit.push(c),o.cltHit.push(s)})}function p(t){var e={tradeIndex:[]};if(t)return t.forEach(t=>{e.tradeIndex.push(t.tradeIndex.value)}),e}function u(t,e,a){if(o={payRate:[],tradeIndex:[],payByr:[],uvIndex:[],seIpv:[],cartHit:[],cltHit:[]},"version"==t.type)getVersion(t.ver,e);else if("monitShop"==t.type){var n=s(a[t.type].data);for(var r in n&&n.forEach(t=>{var e=t.shop_payRateIndex?t.shop_payRateIndex.value:0,a=t.shop_tradeIndex?t.shop_tradeIndex.value:0,n=t.shop_payByrCntIndex?t.shop_payByrCntIndex.value:0,r=t.shop_uvIndex?t.shop_uvIndex.value:0,i=t.shop_seIpvUvHits?t.shop_seIpvUvHits.value:0,c=t.shop_cartHits?t.shop_cartHits.value:0,s=t.shop_cltHits?t.shop_cltHits.value:0;o.payRate.push(e),o.tradeIndex.push(a),o.payByr.push(n),o.uvIndex.push(r),o.seIpv.push(i),o.cartHit.push(c),o.cltHit.push(s)}),o)c(o[r],r,e,Object.keys(o).length,"monitShop",n)}else if("monitFood"==t.type){var i=(b=d(localStorage.getItem(t.dataType),"page")).data.data?b.data.data:b.data,u=b.recordCount?b:b.data;for(var r in l(i),o)c(o[r],r,e,Object.keys(o).length,"marketShop",u)}else if("monitCompareFood"==t.type){var v=s(localStorage.getItem(t.dataType));for(var r in function(t){t&&[t.selfItem,t.rivalItem1,t.rivalItem2].filter(function(t){return t}).forEach(function(t){var e=t.payRateIndex?t.payRateIndex.value:0,a=t.tradeIndex?t.tradeIndex.value:0,n=t.uvIndex?t.uvIndex.value:0,r=t.seIpvUvHits?t.seIpvUvHits.value:0,i=t.cartHits?t.cartHits.value:0,c=t.cltHits?t.cltHits.value:0;o.payRate.push(e),o.tradeIndex.push(a),o.uvIndex.push(n),o.seIpv.push(r),o.cartHit.push(i),o.cltHit.push(c)})}(v),o)c(o[r],r,e,Object.keys(o).length,"monitCompareFood",v)}else if("monitResource"==t.type){var m=s(localStorage.getItem(t.dataType)),h=function(t,e){var a={selfItem:{payRate:[],tradeIndex:[],payByr:[],uvIndex:[]}};return e.rivalItem1Id&&(a.rivalItem1={payRate:[],tradeIndex:[],payByr:[],uvIndex:[]}),e.rivalItem2Id&&(a.rivalItem2={payRate:[],tradeIndex:[],payByr:[],uvIndex:[]}),t&&t.forEach(function(t){var n=a.selfItem,r=t.selfItemPayRateIndex?t.selfItemPayRateIndex.value:0,i=t.selfItemTradeIndex?t.selfItemTradeIndex.value:0,o=t.selfItemPayByrCntIndex?t.selfItemPayByrCntIndex.value:0,c=t.selfItemUv?t.selfItemUv.value:0;if(n.payRate.push(r),n.tradeIndex.push(i),n.payByr.push(o),n.uvIndex.push(c),e.rivalItem1Id){var s=a.rivalItem1,d=t.rivalItem1PayRateIndex?t.rivalItem1PayRateIndex.value:0,l=t.rivalItem1TradeIndex?t.rivalItem1TradeIndex.value:0,p=t.rivalItem1PayByrCntIndex?t.rivalItem1PayByrCntIndex.value:0,u=t.rivalItem1Uv?t.rivalItem1Uv.value:0;s.payRate.push(d),s.tradeIndex.push(l),s.payByr.push(p),s.uvIndex.push(u)}if(e.rivalItem2Id){var v=a.rivalItem2,m=t.rivalItem2PayRateIndex?t.rivalItem2PayRateIndex.value:0,h=t.rivalItem2TradeIndex?t.rivalItem2TradeIndex.value:0,y=t.rivalItem2PayByrCntIndex?t.rivalItem2PayByrCntIndex.value:0,I=t.rivalItem2Uv?t.rivalItem2Uv.value:0;v.payRate.push(m),v.tradeIndex.push(h),v.payByr.push(y),v.uvIndex.push(I)}}),a}(m,a.monitResource.ids),y=2==Object.keys(h).length?6:9;for(var r in o.selfItem={},o.rivalItem1={},o.rivalItem2={},h)for(var I in h[r])"uvIndex"!=I?c(h[r][I],I,e,y,"monitResource",m,r):o[r][I]=h[r][I]}else if("marketShop"==t.type||"marketFood"==t.type)for(var r in i=(t.type,b=d(localStorage.getItem(t.dataType),"page")).data.data?b.data.data:b.data,u=b.recordCount?b:b.data,l(i),o)c(o[r],r,e,Object.keys(o).length,"marketShop",u);else if("marketHotShop"==t.type||"marketHotFood"==t.type){var f=p((b=d(localStorage.getItem(t.dataType),"page")).data);for(var r in f)c(f[r],r,e,Object.keys(f).length,"marketHotShop",b)}else if("marketHotShop"==t.type||"marketHotFood"==t.type){var b;for(var r in f=p((b=d(localStorage.getItem(t.dataType),"page")).data))c(f[r],r,e,Object.keys(f).length,"marketHotShop",b)}else if("hotsale"==t.type){var g=function(t){var e={tradeIndex:[],payRate:[]};return t.length?(t.forEach(function(t){e.tradeIndex.push(t.tradeIndex.value),e.payRate.push(t.payRateIndex.value)}),e):[]}(t.dataType);for(var r in g)c(g[r],r,e,Object.keys(g).length,"hotsale")}else if("hotsearch"==t.type){var x=function(t){var e={seIpv:[],uvIndex:[],tradeIndex:[]};return t.length?(t.forEach(function(t){e.tradeIndex.push(t.tradeIndex.value),e.seIpv.push(t.seIpvUvHits.value),e.uvIndex.push(t.uvIndex.value)}),e):[]}(t.dataType);for(var r in x)c(x[r],r,e,Object.keys(x).length,"hotsearch")}else if("hotpurpose"==t.type){var w=function(t){var e={cartHit:[],cltHit:[],tradeIndex:[]};return t.length?(t.forEach(function(t){e.tradeIndex.push(t.tradeIndex.value),e.cartHit.push(t.cartHits.value),e.cltHit.push(t.cltHits.value)}),e):[]}(t.dataType);for(var r in w)c(w[r],r,e,Object.keys(w).length,"hotpurpose")}else if("dealTrend"==t.type){var O=t.dataType;for(var r in O)c(O[r],r,e,Object.keys(O).length,"dealTrend")}else if("singleCompete"==t.type){var R=function(t){if(!t)return"";var e={payRate:[],tradeIndex:[],payByr:[]};return t.forEach(function(t){var a=t.rivalItem1PayRateIndex?t.rivalItem1PayRateIndex.value:0,n=t.rivalItem1TradeIndex?t.rivalItem1TradeIndex.value:0,r=t.rivalItem1PayByrCntIndex?t.rivalItem1PayByrCntIndex.value:0;e.payRate.push(a),e.tradeIndex.push(n),e.payByr.push(r)}),e}(t.dataType);for(var r in R)c(R[r],r,e,Object.keys(R).length,"singleCompete")}return!0}},,,function(t,e,a){a(6),a(7),t.exports=a(8)},function(t,e,a){"use strict";a.r(e);var n=a(2),r=a(0),i=null,o=[];function c(t,e){var a='<div class="chaqz-wrapper"><div class="content"><div class="cha-box"><div class="head"><div class="title"><span class="chaqz-table-title">'+e+'</span><span class="time">'+$(".ebase-FaCommonFilter__top .oui-date-picker-current-date").text()+'</span></div></div><div class="table-box"><table id="chaqz-table" style="width:100%"></table></div></div><span class="chaqz-close">×</span></div></div>';$("#app").append(a),$("#chaqz-table").DataTable({data:t.data,columns:t.cols,language:{paginate:{next:"&gt;",previous:"&lt;"},sEmptyTable:"获取数据失败，请刷新界面"},searching:!1,ordering:!1,info:!1,dom:"Bfrtip",buttons:[{extend:"csv",title:e,bom:!0},{extend:"copy",exportOptions:{modifier:{page:"current"}}}]})}function s(t,e,a){var i=null,o=0;Object(n.a)({type:"monitCompareFood",dataType:e},function(e){$(".oui-date-picker .oui-canary-btn:contains('日')").click();var n=900-window.innerHeight;n>0&&$(document).scrollTop(n);var c=Object(r.l)(t,dataWrapper,"idObj");if(!$(".op-mc-item-analysis #itemAnalysisKeyword").length)return!1;$("#itemAnalysisKeyword .oui-tab-switch-item:contains('成交关键词')").click();var s=Object(r.k)("getKeywords",1,20).split("&page")[0],l=$("#itemAnalysisKeyword .ant-select-selection-selected-value").attr("title"),p="所有终端"==l?"0":"PC端"==l?"1":"无线端"==l?"2":"",u=c.item1.itemId?"item1":"item2",v=s+p+("item1"==u?"&itemId="+c.item1.itemId:"&itemId="+c.item2.itemId);localStorage.getItem(v)?d(c,u,e,localStorage.getItem(v),a):i=setInterval(function(){o++,localStorage.getItem(v)?(clearInterval(i),i=null,d(c,u,e,localStorage.getItem(v),a)):o>10&&(clearInterval(i),i=null,Object(r.p)("获取关键词失败！","top:10%;"),Object(r.b)())},500)})}function d(t,e,a,n,i){var o={};o.selfItem=t.self?t.self:{},o.item=t[e];var c=l.filterData(a);if(1==c.count)for(var s in c.item0)o.item[s]=c.item0[s];else{for(var s in c.item0)o.selfItem[s]=c.item0[s];for(var d in c.item1)o.item[d]=c.item1[d]}if(o.keywords=l.filterKeywords(JSON.parse(n)),o.plan_id=i.plan_id,o.plan_name=i.title,o.day=7,!o.keywords.length)return chrome.storage.local.set({compareProduceData:o},function(){$(".chaqz-info-wrapper.pop").fadeOut(100),window.open(BASE_URL+"/privilgeEscala")}),Object(r.b)(),!1;var p=localStorage.getItem("chaqz_token");chrome.runtime.sendMessage({key:"getData",options:{url:BASE_URL+"/api/v1/plugin/planData",type:"PUT",headers:{Authorization:"Bearer "+p},contentType:"application/json,charset=utf-8",data:JSON.stringify(o)}},function(t){200==t.code?chrome.storage.local.set({compareProduceData:o},function(){$(".chaqz-info-wrapper.pop").fadeOut(100),window.open(BASE_URL+"/privilgeEscala")}):2030==t.code?LogOut():Object(r.p)("上传数据失败请重试"),Object(r.b)()})}$(document).on("click",".mc-shopMonitor #search",function(){var t;t=dataWrapper2,Object(n.a)({type:"monitShop"},function(t){c({data:t,cols:[{data:"shop",title:"店铺信息",class:"info",render:function(t,e,a,n){return'<img src="'+t.url+'"><span>'+t.title+"</span>"}},{data:"cate_cateRankId",title:"行业排名"},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"seIpv",title:"搜索人数"},{data:"cltHit",title:"收藏人数"},{data:"cartHit",title:"加购人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"},{data:"searRate",title:"搜索占比"},{data:"scRate",title:"收藏率"},{data:"jgRate",title:"加购率"}]},"监控店铺")},t)}),$(document).on("click",".mc-ItemMonitor #search",function(){!function t(e){var a=$(".mc-ItemMonitor .ant-pagination .ant-pagination-item-active").attr("title"),o=$(".mc-ItemMonitor .oui-page-size .ant-select-selection-selected-value").text();o=Number(o);var c=Object(r.k)("monitFood",a,o);Object(n.a)({type:"monitFood",dataType:c},function(n){for(var c=n.value,s=n.final.data,d=n.final.recordCount,l=[],p=c.payRate.length,u=0;u<p;u++){var v="超出范围,请使用插件最高支持7.8亿"!=c.tradeIndex[u]?Math.round(c.tradeIndex[u]):"-",m=Object(r.c)(c.uvIndex[u],c.payRate[u],v),h={shop:{}},y=s[u].cateRankId;h.shop={title:s[u].item.title,url:s[u].item.pictUrl},h.cate_cateRankId=y&&y.value?y.value:"-",h.tradeIndex=v,h.uvIndex=Math.round(c.uvIndex[u]),h.seIpv=Math.round(c.seIpv[u]),h.cltHit=Math.round(c.cltHit[u]),h.cartHit=Math.round(c.cartHit[u]),h.payRate=c.payRate[u].toFixed(2)+"%",h.payByr=m.res1,h.kdPrice=m.res2,h.uvPrice=Object(r.f)(v,c.uvIndex[u],1),h.searRate=Object(r.f)(c.seIpv[u],c.uvIndex[u],2),h.scRate=Object(r.f)(c.cltHit[u],c.uvIndex[u],2),h.jgRate=Object(r.f)(c.cartHit[u],c.uvIndex[u],2),l.push(h)}if(e){if(d>l.length){var I=[];for(let t=0;t<d;t++)I.push(l[0]);var f=I.slice(0,(a-1)*o),b=(a-1)*o+o,g=b<d?I.slice(b):[];l=f.concat(l,g)}!function(e,a,n){var o=$(".ebase-FaCommonFilter__top .oui-date-picker-current-date").text(),c='<div class="chaqz-wrapper"><div class="content "><div class="cha-box"><div class="head"><div class="title"><span class="chaqz-table-title">监控商品</span><span class="time">'+o+'</span></div></div><div class="table-box"><table id="chaqz-table" style="width:100%"></table></div></div><span class="chaqz-close">×</span><div class="chaqz-mask"><span class="loader"></span></div></div></div>';$("#app").append(c),i=$("#chaqz-table").DataTable({data:e.data,destroy:!0,columns:e.cols,language:{paginate:{next:"&gt;",previous:"&lt;"},sEmptyTable:"获取数据失败，请刷新界面"},pageLength:e.paging.pageSize,searching:!1,ordering:!1,info:!1,dom:"Bfrtip",buttons:[{extend:"csv",title:a,bom:!0,exportOptions:{modifier:{page:"current"}}},{extend:"copy",exportOptions:{modifier:{page:"current"}}}]}),e.paging.page&&i.page(Number(e.paging.page)-1).draw(!1),i.on("page.dt",function(a,n,o){var c,s=i.page.info();$(".chaqz-wrapper .chaqz-mask").show(100),$("#mqItemMonitor .ant-pagination .ant-pagination-item-"+(s.page+1)).click(),c=Object(r.k)("monitFood",s.page+1,e.paging.pageSize),localStorage.getItem(c)?t():chrome.runtime.onMessage.addListener(function(e,a,n){(e.type="holdup")&&new RegExp(dataWrapper2.monitFood).test(e.url)&&t()})}),$(".chaqz-wrapper").fadeIn(100)}({data:l,cols:[{data:"shop",title:"店铺信息",class:"info",render:function(t,e,a,n){return'<img src="'+t.url+'"><span>'+t.title+"</span>"}},{data:"cate_cateRankId",title:"行业排名"},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"seIpv",title:"搜索人数"},{data:"cltHit",title:"收藏人数"},{data:"cartHit",title:"加购人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"},{data:"searRate",title:"搜索占比"},{data:"scRate",title:"收藏率"},{data:"jgRate",title:"加购率"}],paging:{page:a,pageSize:o}},"监控商品")}else{for(var x=0;x<o;x++)i.row((a-1)*o+x).data(l[x]);$(".chaqz-wrapper .chaqz-mask").hide(100)}})}("page")}),$(document).on("click","#itemAnalysisTrend .oui-card-header #search",function(){if(!Object(r.n)())return!1;!function(t){var e=Object(r.j)();if(e.totalNum<2)return alert("请选择比较商品"),!1;var a=Object(r.l)(e,t),i=Object(r.k)("monitCompareFood").split("&page")[0],o=(i=Object(r.k)("monitCompareFood").split("&page")[0],$("#itemAnalysisTrend .ant-select-selection-selected-value").attr("title")),s="所有终端"==o?"0":"PC端"==o?"1":"无线端"==o?"2":"";Object(n.a)({type:"monitCompareFood",dataType:i+s+a},function(t){for(var a=[],n=e.totalNum,i=0;i<n;i++){var o={shop:{}};o.shop={url:0==i?e.selfItem.imgurl:e["rivalItem"+i].imgurl?e["rivalItem"+i].imgurl:e["rivalItem"+(i+1)].imgurl,title:0==i?e.selfItem.title:e["rivalItem"+i].title?e["rivalItem"+i].title:e["rivalItem"+(i+1)].title},o.name={},o.name=0==i?{name:"本店竞品",class:""}:e["rivalItem"+i].title?{name:"竞品"+i,class:"red"}:{name:"竞品"+(i+1),class:"red"};var s=Number(t.payRate[i]),d=isNaN(s);o.tradeIndex=Math.round(t.tradeIndex[i]),o.uvIndex=Math.round(t.uvIndex[i]),o.payRate=d?"-":s.toFixed(2)+"%",o.payByr=Object(r.o)(t.uvIndex[i],t.payRate[i],t.tradeIndex[i]).num1,o.kdPrice=Object(r.o)(t.uvIndex[i],t.payRate[i],t.tradeIndex[i]).num2,o.uvPrice=Object(r.f)(t.tradeIndex[i],t.uvIndex[i],1),a.push(o)}a.length>2&&a.splice(2,0,a[0]),c({data:a,cols:[{data:"name",title:"类别",render:function(t,e,a,n){return'<p class="btn '+t.class+'">'+t.name+"</p>"}},{data:"shop",title:"店铺信息",class:"info",render:function(t,e,a,n){return'<img src="'+t.url+'"><span>'+t.title+"</span>"}},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"}]},"关键词指标对比")})}(dataWrapper2)}),$(document).on("click","#sycm-mc-flow-analysis .oui-card-header #search",function(){if(!Object(r.n)())return!1;!function(t){var e=Object(r.j)();if(e.ispass)return alert("请选择比较商品"),!1;var a=Object(r.l)(e,t),i=Object(r.k)("monitResource").split("&page")[0],o=(i=Object(r.k)("monitResource").split("&page")[0],$("#sycm-mc-flow-analysis .ant-select-selection-selected-value").attr("title")),s="所有终端"==o?"0":"PC端"==o?"1":"无线端"==o?"2":"";Object(n.a)({type:"monitResource",dataType:i+s+a},function(a){for(var n=a.value,i=a.final,o=t.monitResource.ids,s=n.selfItem.payRate.length,d=[],l=0;l<s;l++)for(var p=e.totalNum,u=2==p?n.rivalItem1?"rivalItem1":"rivalItem2":"",v=0;v<p;v++){var m={shop:{}};m.shop={url:0==v?e.selfItem.imgurl:3==p?e["rivalItem"+v].imgurl:e[u].imgurl,title:0==v?e.selfItem.title:3==p?e["rivalItem"+v].title:e[u].title},m.name={},m.name=0==v?{name:"本店竞品",class:""}:3==p?{name:"竞品"+v,class:"red"}:{name:"竞品"+u.slice(-1),class:"red"};var h=0==v?o.selfItemId:3==p?o["rivalItem"+v+"Id"]:o[u+"Id"];m.cateRank=h||"-",m.pageName=i[l].pageName?i[l].pageName.value:"-";var y=0==v?n.selfItem.tradeIndex[l]:3==p?n["rivalItem"+v].tradeIndex[l]:n[u].tradeIndex[l],I=0==v?n.selfItem.payByr[l]:3==p?n["rivalItem"+v].payByr[l]:n[u].payByr[l],f=0==v?n.selfItem.uvIndex[l]:3==p?n["rivalItem"+v].uvIndex[l]:n[u].uvIndex[l],b=0==v?n.selfItem.payRate[l]:3==p?n["rivalItem"+v].payRate[l]:n[u].payRate[l];m.tradeIndex=Math.round(y),m.uvIndex=f?Math.round(f):"-",m.payRate=b.toFixed(2)+"%",m.payByr=Math.round(I),m.kdPrice=Object(r.f)(Object(r.e)(y),Object(r.e)(I),1),m.uvPrice=Object(r.f)(Object(r.e)(y),Object(r.e)(f),1),d.push(m)}c({data:d,cols:[{data:"name",title:"类别",render:function(t,e,a,n){return'<p class="btn '+t.class+'">'+t.name+"</p>"}},{data:"shop",title:"商品信息",class:"info",render:function(t,e,a,n){return'<img src="'+t.url+'"><span>'+t.title+"</span>"}},{data:"cateRank",title:"商品ID"},{data:"pageName",title:"流量来源"},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"}]},"入店来源")},t)}(dataWrapper2)}),$(document).on("click",".chaqz-close",function(){$(".chaqz-wrapper .content").removeClass("small"),$(".chaqz-wrapper").remove(),i=null}),$(document).on("click","#vesting",function(){var t=window.location.href;if(!/https:\/\/sycm\.taobao\.com\/mc\/ci\/item\/analysis/.test(t))return r.q.init("goChoose"),!1;if(!Object(r.n)())return!1;var e=Object(r.j)();if(e.rivalItem1.title&&e.rivalItem2.title||!e.rivalItem1.title&&!e.rivalItem2.title)return r.q.init("onlyOne"),!1;var a=localStorage.getItem("chaqz_token");chrome.runtime.sendMessage({key:"getData",options:{url:BASE_URL+"/api/v1/plugin/planData",type:"GET",headers:{Authorization:"Bearer "+a}}},function(t){200==t.code?(r.q.init("selectPlan",t.data),o=t.data):4001==t.code?r.q.init("selectPlan"):2030==t.code?LogOut():Object(r.p)("获取计划列表失败，请重试")})}),$(document).on("click",".chaqz-info-wrapper.pop .hides",function(){if($(".chaqz-info-wrapper.pop").find("#giveupPlan").length)return r.q.init("selectPlan",o),!1;$(".chaqz-info-wrapper.pop").hide()}),$(document).on("click",".chaqz-info-wrapper.pop .planBtn",function(){var t=$(".chaqz-info-wrapper.pop .editor").val(),e=$(".chaqz-info-wrapper.pop .selcet").val(),a=o,n=l.checkRepeat(o,t);if(!t||!e)return Object(r.p)("请填写计划"),!1;if(n)return Object(r.p)("计划名已存在"),!1;var i=localStorage.getItem("chaqz_token");chrome.runtime.sendMessage({key:"getData",options:{url:BASE_URL+"/api/v1/plugin/planData",type:"POST",headers:{Authorization:"Bearer "+i},contentType:"application/json,charset=utf-8",data:JSON.stringify({title:t,type:1})}},function(t){200==t.code?(a.unshift(t.data),r.q.init("selectPlan",a)):2030==t.code?LogOut():Object(r.p)("计划生成失败！")})}),$(document).on("click",".chaqz-info-wrapper.pop #vestBtn",function(){Object(r.b)("show");var t=$(".chaqz-info-wrapper.pop .form-list .selcet").val(),e=l.chosePlan(o,t);if(0==t)return Object(r.b)(),Object(r.p)("请选择计划","top:10%;"),!1;var a=null,n=0;$(".oui-date-picker .oui-canary-btn:contains('7天')").click();var i=Object(r.j)(),c=Object(r.l)(i,dataWrapper),d=Object(r.k)("monitCompareFood").split("&page")[0],p=$("#itemAnalysisTrend .ant-select-selection-selected-value").attr("title"),u=d+("所有终端"==p?"0":"PC端"==p?"1":"无线端"==p?"2":"")+c;localStorage.getItem(u)?s(i,u,e):a=setInterval(function(){n++,localStorage.getItem(u)?(clearInterval(a),a=null,s(i,u,e)):n>10&&(clearInterval(a),a=null,Object(r.p)("获取指数数据失败！","top:10%;"),Object(r.b)())},500)});var l={checkRepeat:function(t,e){if(!t)return!1;var a=!1;return t.forEach(function(t){t.title==e&&(a=!0)}),a},filterKeywords:function(t){if(!t)return[];var e=[];return t.forEach(function(t){t.tradeIndex.value>100&&t.tradeIndex.value<450&&e.push(t.keyword.value)}),e},chosePlan:function(t,e){if(!t)return{};for(var a=0;a<t.length;a++)if(t[a].title==e)return t[a]},filterData:function(t){var e={item0:{},item1:{}};for(var a in t){var n=t.payRate.length;e.count=n,t[a].forEach(function(t,n){"payRate"==a&&(t=t?t/100:""),e["item"+n][a]=t||""})}return e}}},function(t,e,a){"use strict";a.r(e);var n=a(2),r=a(0),i=null;function o(t){return t?t>0?"降"+t+"名":"升"+(t+"").slice(1)+"名":"_"}function c(t){return t?Number(100*t).toFixed(2)+"%":"-"}function s(t,e,a){var n=$(".ebase-FaCommonFilter__top .oui-date-picker-current-date").text(),o='<div class="chaqz-wrapper"><div class="content '+(2==a?"small":"")+'"><div class="cha-box"><div class="head"><div class="title"><span class="chaqz-table-title">'+e+'</span><span class="time">'+n+'</span></div></div><div class="table-box"><table id="chaqz-table" style="width:100%"></table></div></div><span class="chaqz-close">×</span><div class="chaqz-mask"><span class="loader"></span></div></div></div>';$("#app").append(o),i=$("#chaqz-table").DataTable({data:t.data,destroy:!0,columns:t.cols,language:{paginate:{next:"&gt;",previous:"&lt;"},sEmptyTable:"获取数据失败，请刷新界面"},pageLength:t.paging.pageSize,searching:!1,ordering:!1,info:!1,dom:"Bfrtip",buttons:[{extend:"csv",title:e,bom:!0,exportOptions:{modifier:{page:"current"}}},{extend:"copy",exportOptions:{modifier:{page:"current"}}}]}),t.paging.page&&i.page(Number(t.paging.page)-1).draw(!1),i.on("page.dt",function(n,o,c){var s=i.page.info();if(1==a){$(".chaqz-wrapper .chaqz-mask").show(100),$(".mc-marketMonitor .ant-pagination .ant-pagination-item-"+(s.page+1)).click();var p="监控店铺"==e?"marketShop":"monitFood",u=Object(r.k)(p,s.page+1,t.paging.pageSize);localStorage.getItem(u)?listenShop():chrome.runtime.onMessage.addListener(function(t,e,a){if(t.type="holdup"){var n=new RegExp(window.dataWrapper2.marketShop),r=new RegExp(window.dataWrapper2.monitFood);(n.test(t.url)||r.test(t.url))&&listenShop()}})}else 2==a?($(".chaqz-wrapper .chaqz-mask").show(100),$(".op-mc-market-monitor-industryCard .ant-pagination .ant-pagination-item-"+(s.page+1)).click(),p="热门店铺"==e?"marketHotShop":"marketHotFood",u=Object(r.k)(p,s.page+1,t.paging.pageSize),localStorage.getItem(u)?l():chrome.runtime.onMessage.addListener(function(t,e,a){if(t.type="holdup"){var n=new RegExp(window.dataWrapper2.marketHotShop),r=new RegExp(window.dataWrapper2.marketHotFood);(n.test(t.url)||r.test(t.url))&&l()}})):3==a?($(".chaqz-wrapper .chaqz-mask").show(100),$("#mqItemMonitor .ant-pagination .ant-pagination-item-"+(s.page+1)).click(),u=Object(r.k)("monitFood",s.page+1,t.paging.pageSize),localStorage.getItem(u)?MonitorItem():chrome.runtime.onMessage.addListener(function(t,e,a){(t.type="holdup")&&new RegExp(window.dataWrapper2.monitFood).test(t.url)&&MonitorItem()})):4==a&&($(".chaqz-wrapper .chaqz-mask").show(100),$(".op-mc-market-rank-container .ant-pagination .ant-pagination-item-"+(s.page+1)).click(),d())}),$(".chaqz-wrapper").fadeIn(100)}function d(t){var e=$(".op-mc-market-rank-container .oui-card-header-wrapper .oui-tab-switch .oui-tab-switch-item-active").index(),a=$(".op-mc-market-rank-container .op-ebase-switch .ebase-Switch__activeItem").index(),d=$(".op-mc-market-rank-container .ant-pagination .ant-pagination-item-active").attr("title"),l=$(".op-mc-market-rank-container .oui-page-size .ant-select-selection-selected-value").text();d=d?Number(d):1,l=Number(l);var p=1==e?"hotsearch":2==e?"hotpurpose":"hotsale",u=1==a?"item":2==a?"brand":"shop",v=Object(r.k)(p),m=JSON.parse(localStorage.getItem(u+"/"+v)),h=m.length,y=m.slice((d-1)*l,d*l);Object(n.a)({type:p,dataType:y},function(n){for(var p=n.value,u=[],v=p.tradeIndex.length,m=0;m<v;m++){var I={shop:{}};I.shop={title:1==a?y[m].item.title:2==a?y[m].brandModel.brandName:y[m].shop.title,url:1==a?y[m].item.pictUrl:2==a?"//img.alicdn.com/tps/"+y[m].brandModel.logo+"_36x36.jpg":y[m].shop.pictureUrl},y[m].cateRankId.cycleCqc,I.cate_cateRankId={value:y[m].cateRankId.value,cyc:o(y[m].cateRankId.cycleCqc)},I.tradeIndex="超出范围,请使用插件最高支持7.8亿"!=p.tradeIndex[m]?p.tradeIndex[m]:"超出范围",0==e?(I.growth=c(y[m].tradeGrowthRange.value),I.payRate=p.payRate[m]+"%"):1==e?(I.uvIndex=p.uvIndex[m],I.seIpv=p.seIpv[m],I.searRate=Object(r.f)(p.seIpv[m],p.uvIndex[m],2),I.uvPrice=Object(r.f)(p.tradeIndex[m],p.uvIndex[m],1)):(I.cltHit=p.cltHit[m],I.cartHit=p.cartHit[m]),u.push(I)}if(t){if(h>u.length){var f=[];for(let t=0;t<h;t++)f.push(u[0]);var b=f.slice(0,(d-1)*l),g=(d-1)*l+l,x=g<h?f.slice(g):[];u=b.concat(u,x)}var w=1==a?"商品":2==e?"品牌":"店铺";s({data:u,cols:0==e?[{data:"shop",title:w+"信息",class:"info",render:function(t,e,a,n){return"<div class='info'><img src = '"+t.url+"'><span>"+t.title+"</span></div>"}},{data:"cate_cateRankId",title:"行业排名",render:function(t,e,a,n){return"<span>"+t.value+'</span><p class="cycle">'+t.cyc+"</p>"}},{data:"tradeIndex",title:"交易金额"},{data:"growth",title:"交易增长幅度"},{data:"payRate",title:"支付转化率"}]:1==e?[{data:"shop",title:w+"信息",class:"info",render:function(t,e,a,n){return"<div class='info'><img src = '"+t.url+"'><span>"+t.title+"</span></div>"}},{data:"cate_cateRankId",title:"行业排名",render:function(t,e,a,n){return"<span>"+t.value+'</span><p class="cycle">'+t.cyc+"</p>"}},{data:"uvIndex",title:"访客人数"},{data:"seIpv",title:"搜索人数"},{data:"searRate",title:"搜索占比"},{data:"tradeIndex",title:"交易金额"},{data:"uvPrice",title:"UV价值"}]:[{data:"shop",title:w+"信息",class:"info",render:function(t,e,a,n){return"<div class='info'><img src = '"+t.url+"'><span>"+t.title+"</span></div>"}},{data:"cate_cateRankId",title:"行业排名",render:function(t,e,a,n){return"<span>"+t.value+'</span><p class="cycle">'+t.cyc+"</p>"}},{data:"cltHit",title:"收藏人数"},{data:"cartHit",title:"加购人数"},{data:"tradeIndex",title:"交易金额"}],paging:{page:d,pageSize:l}},w+"--"+(1==e?"高流量":2==e?"高意向":"高交易"),4)}else{for(var O=0;O<l;O++)i.row((d-1)*l+O).data(u[O]);$(".chaqz-wrapper .chaqz-mask").hide(100)}},window.dataWrapper2)}function l(t){var e=$(".op-mc-market-monitor-industryCard .oui-card-header-item .oui-tab-switch-item-active").index(),a=$(".op-mc-market-monitor-industryCard .ant-pagination .ant-pagination-item-active").attr("title"),o=$(".op-mc-market-monitor-industryCard .oui-page-size .ant-select-selection-selected-value").text();o=Number(o);var c=e?"marketHotFood":"marketHotShop",d=Object(r.k)(c,a,o);Object(n.a)({type:c,dataType:d},function(n){for(var r=n.value,c=n.final.data,d=n.final.recordCount,l=[],p=r.tradeIndex.length,u=0;u<p;u++){var v={shop:{}};v.shop=0==e?{title:c[u].shop.title,url:c[u].shop.pictureUrl}:{title:c[u].item.title,url:c[u].item.pictUrl};var m=c[u].cateRankId;v.cate_cateRankId=m?m.value:"-",v.tradeIndex=r.tradeIndex[u],l.push(v)}if(t){if(d>l.length){var h=[];for(let t=0;t<d;t++)h.push({shop:{title:"",url:""},cate_cateRankId:"",tradeIndex:""});var y=h.slice(0,(a-1)*o),I=(a-1)*o+o,f=I<d?h.slice(I):[];l=y.concat(l,f)}s({data:l,cols:[{data:"shop",title:"店铺信息",class:"info",render:function(t,e,a,n){return'<img src="'+t.url+'"><span>'+t.title+"</span>"}},{data:"cate_cateRankId",title:"行业排名"},{data:"tradeIndex",title:"交易金额"}],paging:{page:a,pageSize:o}},e?"热门商品":"热门店铺",2)}else{for(var b=0;b<o;b++)i.row((a-1)*o+b).data(l[b]);$(".chaqz-wrapper .chaqz-mask").hide(100)}},window.dataWrapper2)}$(function(){$(document).on("click",".mc-marketMonitor .oui-tab-switch .oui-tab-switch-item",function(){2==$(this).index()?$(".mc-marketMonitor #search").hide():$(".mc-marketMonitor #search").show()}),$(document).on("click",".op-mc-market-monitor-industryCard .oui-tab-switch .oui-tab-switch-item",function(){2==$(this).index()?$(".op-mc-market-monitor-industryCard #search").hide():$(".op-mc-market-monitor-industryCard #search").show()}),$(document).on("click",".mc-marketMonitor #search",function(){if(!Object(r.n)())return!1;var t,e,a,i,o;t=$(".mc-marketMonitor .oui-tab-switch .oui-tab-switch-item-active").index(),e=$(".mc-marketMonitor .ant-pagination .ant-pagination-item-active").attr("title"),a=$(".mc-marketMonitor .oui-page-size .ant-select-selection-selected-value").text(),i=t?"marketFood":"marketShop",o=Object(r.k)(i,e,a),i&&(o=o.replace("marketFood","monitFood")),Object(n.a)({type:i,dataType:o},function(n){for(var i=n.value,o=n.final.data,c=n.final.recordCount,d=[],l=i.payRate.length,p=0;p<l;p++){var u="超出范围,请使用插件最高支持7.8亿"!=i.tradeIndex[p]?Math.round(i.tradeIndex[p]):"-",v=Object(r.c)(i.uvIndex[p],i.payRate[p],u),m={shop:{}},h=o[p].cateRankId;m.shop=t?{title:o[p].item.title,url:o[p].item.pictUrl}:{title:o[p].shop.title,url:o[p].shop.pictureUrl},m.cate_cateRankId=h&&h.value?h.value:"-",m.tradeIndex=u,m.uvIndex=Math.round(i.uvIndex[p]),m.seIpv=Math.round(i.seIpv[p]),m.cltHit=Math.round(i.cltHit[p]),m.cartHit=Math.round(i.cartHit[p]),m.payRate=i.payRate[p].toFixed(2)+"%",m.payByr=v.res1,m.kdPrice=v.res2,m.uvPrice=Object(r.f)(u,i.uvIndex[p],1),m.searRate=Object(r.f)(i.seIpv[p],i.uvIndex[p],2),m.scRate=Object(r.f)(i.cltHit[p],i.uvIndex[p],2),m.jgRate=Object(r.f)(i.cartHit[p],i.uvIndex[p],2),d.push(m)}if(c>d.length){var y=[];for(let t=0;t<c;t++)y.push(d[0]);var I=y.slice(0,(e-1)*a),f=(e-1)*a+a,b=f<c?y.slice(f):[];d=I.concat(d,b)}s({data:d,cols:[{data:"shop",title:"店铺信息",class:"info",render:function(t,e,a,n){return'<img src="'+t.url+'"><span>'+t.title+"</span>"}},{data:"cate_cateRankId",title:"行业排名"},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"seIpv",title:"搜索人数"},{data:"cltHit",title:"收藏人数"},{data:"cartHit",title:"加购人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"},{data:"searRate",title:"搜索占比"},{data:"scRate",title:"收藏率"},{data:"jgRate",title:"加购率"}],paging:{page:e,pageSize:a}},t?"监控商品":"监控店铺",1)},window.dataWrapper2)}),$(document).on("click",".op-mc-market-monitor-industryCard .oui-card-header-item-pull-right #search",function(){if(!Object(r.n)())return!1;l("pageType")}),$(document).on("click",".op-mc-market-rank-container #search",function(){d("pagetype")}),$(document).on("click",".op-mc-market-rank-container .alife-dt-card-common-table-right-column",function(t){var e=$(".ant-modal-mask:not(.ant-modal-mask-hidden)").siblings(".ant-modal-wrap"),a=e.find(".ant-modal-header"),i=$(".op-mc-market-rank-container .op-ebase-switch .ebase-Switch__activeItem").index(),o=1==i?"item":2==i?"brand":"shop";if($(a).find(".serachBtn").length)return!1;$(a).append('<div class="chaqz-btns btnsItem1 trend"><button id="search" class="serachBtn">一键转化</button></div>');var c=$(e).find(".op-mc-rival-trend-analysis").attr("id"),s=c?c.split("-"):"",d=s[s.length-1];$(a).find("#search").click(function(){if(!Object(r.n)())return!1;Object(r.b)("show");var t=Object(r.k)("allTrend",null,null,"type"),e=o+"/"+t+"&userId="+d,a=Object(r.i)(),c=o+"/trendShopcateId="+a+"&userId="+d,s=JSON.parse(localStorage.getItem(c)),l=JSON.parse(localStorage.getItem(e));Object(n.a)({type:"dealTrend",dataType:l},function(t){for(var e=[],a=t.value,n=Object(r.h)(Object(r.g)(),"MM-dd"),o=Object(r.h)(Object(r.g)()),c=0;c<30;c++){var d={};d.date=o[c],d.tradeIndex="超出范围,请使用插件最高支持7.8亿"==a.tradeIndex[c]?"-":a.tradeIndex[c],d.uvIndex=a.uvIndex[c],d.payByr=a.payByrCntIndex[c],d.payRate=a.payRateIndex[c],d.kdPrice=Object(r.f)(d.tradeIndex,a.payByrCntIndex[c],1),d.uvPrice=Object(r.f)(d.tradeIndex,a.uvIndex[c],1),i&&(d.seIpv=a.seIpvUvHits[c],d.cltHit=a.cltHits[c],d.cartHit=a.cartHits[c],d.searRate=Object(r.f)(a.seIpvUvHits[c],a.uvIndex[c],2),d.scRate=Object(r.f)(a.cltHits[c],a.uvIndex[c],2),d.jgRate=Object(r.f)(a.cartHits[c],a.uvIndex[c],2)),e.push(d)}var l=[{data:"date",title:"日期"},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"}];i&&(l=[{data:"date",title:"日期"},{data:"tradeIndex",title:"交易金额"},{data:"uvIndex",title:"访客人数"},{data:"seIpv",title:"搜索人数"},{data:"cltHit",title:"收藏人数"},{data:"cartHit",title:"加购人数"},{data:"payRate",title:"支付转化率"},{data:"payByr",title:"支付人数"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"},{data:"searRate",title:"搜索占比"},{data:"scRate",title:"收藏率"},{data:"jgRate",title:"加购率"}]),function(t,e,a,n){var i='<div class="chaqz-wrapper"><div class="content"><div class="cha-box"><div class="head"><div class="title"><span class="chaqz-table-title">趋势分析</span></div><div><img src="'+e.picUrl+'"><span>'+e.name+'</span></div></div><div id="chaqzx-echarts-wrap"></div><div class="table-box"><table id="chaqz-table-trend" class="trend-table"></table></div></div><span class="chaqz-close">×</span></div></div>';$("#app").append(i),$("#chaqz-table-trend").DataTable({data:t.data,columns:t.cols,language:{paginate:{next:"&gt;",previous:"&lt;"},sEmptyTable:"获取数据失败，请刷新界面"},searching:!1,ordering:!1,info:!1,dom:"Bfrtip",buttons:[{extend:"csv",title:e.name+"-趋势分析",bom:!0},{extend:"copy",exportOptions:{modifier:{page:"current"}}}]});var o=echarts.init(document.getElementById("chaqzx-echarts-wrap")),c={tooltip:{trigger:"axis"},toolbox:{show:!0},legend:{data:["访客人数","支付转化率","交易金额","支付人数"],right:"5%"},grid:{right:"5%",left:"5%"},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!0}},{type:"value",show:!1},{type:"value",show:!1},{type:"value",show:!1}],series:[{name:"访客人数",type:"line",smooth:!0,yAxisIndex:0,showSymbol:!1,symbol:"circle",lineStyle:{color:"#2062E6"},itemStyle:{color:"#2062E6"},data:n.uvIndex},{name:"支付转化率",type:"line",smooth:!0,yAxisIndex:1,showSymbol:!1,symbol:"circle",lineStyle:{color:"#F3D024"},itemStyle:{color:"#F3D024"},data:n.payRateIndex},{name:"交易金额",type:"line",smooth:!0,yAxisIndex:2,showSymbol:!1,symbol:"circle",lineStyle:{color:"#FF8533"},itemStyle:{color:"#FF8533"},data:n.tradeIndex},{name:"支付人数",type:"line",smooth:!0,yAxisIndex:3,showSymbol:!1,symbol:"circle",lineStyle:{color:"#4CB5FF"},itemStyle:{color:"#4CB5FF"},data:n.payByrCntIndex}]};o.setOption(c),Object(r.b)()}({data:e,cols:l},s,n,a)})})})})},function(t,e,a){"use strict";a.r(e),a.d(e,"competeDataAnaly",function(){return p}),a.d(e,"competeFlowAnaly",function(){return u}),a.d(e,"competeKeywordAnaly",function(){return v});var n=a(0),r=a(2),i=a(1),o=null,c=null,s=0;function d(t,e,a){var r=Object(n.g)(),i=Object(n.r)(r,"day"),o="&topType=trade&indexCode=tradeIndex";return a&&(o="&topType=flow&indexCode=uv"),{url:"https://sycm.taobao.com/mc/rivalItem/analysis/getKeywords.json?dateRange="+i+"&dateType=day&pageSize=100&page=1&device="+e+"&sellerType=0&cateId="+Object(n.i)()+"&itemId="+t+o,time:i}}function l(t,e,a,r,i){var s=1==i?"竞品流量解析":2==i?"竞品关键词解析":"竞品数据解析",d='<div class="chaqz-wrapper"><div class="content"><div class="chaqz-top-tabs">'+(1==i?'<button class="switchBtn active switchFlow">移动数据</button><button class="switchBtn switchFlow">pc数据</button>':2==i?'<button class="switchBtn active switchKey">移动数据</button><button class="switchBtn switchKey">pc数据</button>':'<button class="active switchBtn switchData">总数据</button><button class="switchBtn switchData">移动数据</button><button class="switchBtn switchData">pc数据</button>')+'</div><div class="cha-box"><div class="head"><div class="title"><span class="chaqz-table-title">'+s+'</span><span class="time">'+r+'</span></div></div><div id="chaqzx-echarts-wrap"></div><div class="table-box"><table id="chaqz-table-trend" class="trend-table"></table></div></div><span class="chaqz-close">×</span></div></div>';if($("#app").append(d),o=$("#chaqz-table-trend").DataTable({data:t.data,columns:t.cols,language:{paginate:{next:"&gt;",previous:"&lt;"},sEmptyTable:"获取数据失败，请刷新界面"},searching:!1,ordering:!1,info:!1,paging:!1,dom:"Bfrtip",buttons:[{extend:"csv",title:s,bom:!0},{extend:"copy",exportOptions:{modifier:{page:"current"}}}]}),c=echarts.init(document.getElementById("chaqzx-echarts-wrap")),1==i)var l={tooltip:{trigger:"axis"},toolbox:{show:!0},legend:{show:!0},grid:{right:"5%",left:"5%"},xAxis:{type:"category",boundaryGap:!0,data:e},yAxis:[{type:"value"},{type:"value",show:!1},{type:"value",show:!1},{type:"value",show:!1},{type:"value",show:!1}],series:[{name:"访客数",type:"bar",yAxisIndex:0,data:a.uvIndex},{name:"买家数",type:"bar",yAxisIndex:1,data:a.payByr},{name:"转化率",type:"bar",yAxisIndex:2,data:a.payRate},{name:"交易金额",type:"bar",yAxisIndex:3,data:a.tradeIndex},{name:"UV价值",type:"bar",yAxisIndex:4,data:a.uvPrice}]};else l=2==i?{tooltip:{trigger:"axis"},toolbox:{show:!0},legend:{data:["访客数","支付件数","支付转化率"]},grid:{right:"5%",left:"5%",bottom:100},xAxis:{type:"category",boundaryGap:!0,axisLabel:{rotate:-45},data:e},yAxis:[{type:"value"},{type:"value",show:!1},{type:"value",show:!1}],series:[{name:"访客数",type:"bar",yAxisIndex:0,data:a.uvIndex},{name:"支付件数",type:"bar",yAxisIndex:1,data:a.tradeIndex},{name:"支付转化率",type:"bar",yAxisIndex:2,data:a.payRate}]}:{tooltip:{trigger:"axis"},toolbox:{show:!0},legend:{show:!0},grid:{right:"5%",left:"5%",bottom:100},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:[{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!0}},{type:"value",show:!1},{type:"value",show:!1}],series:[{name:"访客人数",type:"line",smooth:!0,yAxisIndex:0,data:a.uvIndex},{name:"交易金额",type:"line",smooth:!0,yAxisIndex:2,data:a.tradeIndex},{name:"搜索人数",type:"line",smooth:!0,yAxisIndex:0,data:a.seIpvUvHits},{name:"收藏人数",type:"line",smooth:!0,yAxisIndex:0,data:a.cltHits},{name:"转化率（%）",type:"line",smooth:!0,yAxisIndex:1,data:a.payRateIndex},{name:"支付件数",type:"line",smooth:!0,yAxisIndex:1,data:a.payItemCnt},{name:"加购人数",type:"line",smooth:!0,yAxisIndex:0,data:a.cartHits},{name:"uv价值",type:"line",smooth:!0,yAxisIndex:1,data:a.uvPrice},{name:"搜索占比（%）",type:"line",smooth:!0,yAxisIndex:1,data:a.searchRate},{name:"收藏率（%）",type:"line",smooth:!0,yAxisIndex:1,data:a.cangRate},{name:"买家数",type:"line",smooth:!0,yAxisIndex:0,data:a.payItemCnt},{name:"加购率",type:"line",smooth:!0,yAxisIndex:1,data:a.buyRate}]};c.setOption(l),Object(n.b)()}function p(t,e){Object(n.b)("show");var a=Object(n.g)("moreDay"),i=Object(n.r)(a),s=i.replace("|","~"),d="https://sycm.taobao.com/mc/rivalItem/analysis/getCoreTrend.json?dateType=recent30&dateRange="+i+"&device="+e+"&cateId="+Object(n.i)()+"&rivalItem1Id="+t;console.log(d);var p=localStorage.getItem(d),u=$(".chaqz-wrapper").length;if(p){var v=JSON.parse(p);if(u){var m=v.eData;o.clear(),o.rows.add(v.tableData).draw(),c.setOption({series:[{data:m.uvIndex},{data:m.tradeIndex},{data:m.seIpvUvHits},{data:m.cltHits},{data:m.payRateIndex},{data:m.payItemCnt},{data:m.cartHits},{data:m.uvPrice},{data:m.searchRate},{data:m.cangRate},{data:m.payItemCnt},{data:m.buyRate}]})}else l({data:v.tableData,cols:v.tableClos},v.edate,v.eData,v.dateRange);return Object(n.b)(),!1}chrome.storage.local.get("transitId",function(t){$.ajax({url:d,type:"GET",headers:{"transit-id":t.transitId},error:function(){Object(n.p)("获取数据失败请重试！"),Object(n.b)()},success:function(t){var e=JSON.parse(Object(n.a)(t.data)).rivalItem1;if(console.log(t,e),!e)return Object(n.p)("获取数据失败请重试！"),Object(n.b)(),!1;var i={cartHits:e.cartHits,cltHits:e.cltHits,payRateIndex:e.payRateIndex,seIpvUvHits:e.seIpvUvHits,tradeIndex:e.tradeIndex,uvIndex:e.uvIndex};Object(r.a)({type:"dealTrend",dataType:i},function(t){var r=[],i=t.value;i.uvPrice=[],i.searchRate=[],i.cangRate=[],i.buyRate=[],i.payItemCnt=e.payItemCnt;for(var p=Object(n.h)(a),v=Object(n.h)(a),m=0;m<30;m++){var h={};h.order=m+1,h.date=v[m],h.tradeIndex="超出范围,请使用插件最高支持7.8亿"==i.tradeIndex[m]?"-":i.tradeIndex[m],h.uvIndex=i.uvIndex[m];var y=i.payRateIndex[m]*i.uvIndex[m]/100;h.payByr=isNaN(y)?"-":Math.floor(y),h.payRate=i.payRateIndex[m]+"%",h.kdPrice=Object(n.f)(h.tradeIndex,i.payItemCnt[m],1),h.uvPrice=Object(n.f)(h.tradeIndex,i.uvIndex[m],1),h.seIpv=i.seIpvUvHits[m],h.cltHit=i.cltHits[m],h.cartHit=i.cartHits[m],h.searRate=Object(n.f)(i.seIpvUvHits[m],i.uvIndex[m],2),h.scRate=Object(n.f)(i.cltHits[m],i.uvIndex[m],2),h.jgRate=Object(n.f)(i.cartHits[m],i.uvIndex[m],2),i.uvPrice.push(h.uvPrice),i.searchRate.push(h.searRate.slice(0,-1)),i.cangRate.push(h.scRate.slice(0,-1)),i.buyRate.push(h.jgRate.slice(0,-1)),r.push(h)}var I=[{data:"order",title:"序号"},{data:"date",title:"日期"},{data:"uvIndex",title:"访客人数"},{data:"seIpv",title:"搜索人数"},{data:"searRate",title:"搜索占比"},{data:"payByr",title:"购买人数"},{data:"payRate",title:"支付转化率"},{data:"cltHit",title:"收藏人数"},{data:"scRate",title:"收藏率"},{data:"cartHit",title:"加购人数"},{data:"jgRate",title:"加购率"},{data:"tradeIndex",title:"交易金额"},{data:"kdPrice",title:"客单价"},{data:"uvPrice",title:"UV价值"}];u?(o.clear(),o.rows.add(r).draw(),c.setOption({series:[{data:i.uvIndex},{data:i.tradeIndex},{data:i.seIpvUvHits},{data:i.cltHits},{data:i.payRateIndex},{data:i.payItemCnt},{data:i.cartHits},{data:i.uvPrice},{data:i.searchRate},{data:i.cangRate},{data:i.payItemCnt},{data:i.buyRate}]})):l({data:r,cols:I},p,i,s),console.log(r,p,s),localStorage.setItem(d,JSON.stringify({tableData:r,tableClos:I,eData:i,edate:p,dateRange:s})),Object(n.b)()})}})})}function u(t,e){Object(n.b)("show");var a=Object(n.g)(),i=Object(n.r)(a,"day"),s=i.replace("|","~"),d="https://sycm.taobao.com/mc/rivalItem/analysis/getFlowSource.json?device="+e+"&cateId="+Object(n.i)()+"&rivalItem1Id="+t+"&dateType=day&dateRange="+i+"&indexCode=uv&orderBy=uv&order=desc",p=localStorage.getItem(d),u=$(".chaqz-wrapper").length;if(p){var v=JSON.parse(p);if(u){var m=v.eData;o.clear(),o.rows.add(v.tableData).draw(),c.setOption({xAxis:{type:"category",boundaryGap:!0,data:v.edate},series:[{data:m.uvIndex},{data:m.payByr},{data:m.payRate},{data:m.tradeIndex},{data:m.uvPrice}]})}else l({data:v.tableData,cols:v.tableClos},v.edate,v.eData,v.dateRange,1);return Object(n.b)(),!1}chrome.storage.local.get("transitId",function(t){$.ajax({url:d,type:"GET",headers:{"transit-id":t.transitId},error:function(){Object(n.p)("获取数据失败请重试！"),Object(n.b)()},success:function(t){if(!t.data)return Object(n.p)("数据获取失败，请重试！"),Object(n.b)(),!1;var e=JSON.parse(Object(n.a)(t.data));Object(r.a)({type:"singleCompete",dataType:e},function(t){var a=[],r=t.value,i=r.payRate.length,p=[];r.uvPrice=[];for(var v=0;v<i;v++){var m={};m.order=v+1,m.source=e[v].pageName?e[v].pageName.value:"",m.tradeIndex="超出范围,请使用插件最高支持7.8亿"==r.tradeIndex[v]?"-":r.tradeIndex[v],m.uvIndex=e[v].rivalItem1Uv?e[v].rivalItem1Uv.value:"",r.uvIndex[v]=m.uvIndex,m.uvPrice=Object(n.f)(m.tradeIndex,m.uvIndex,1),r.uvPrice[v]=m.uvPrice,m.payByr=r.payByr[v],m.payRate=r.payRate[v]+"%",p.push(m.source),a.push(m)}var h=[{data:"order",title:"序号"},{data:"source",title:"流量来源"},{data:"uvIndex",title:"访客数"},{data:"payByr",title:"买家数"},{data:"payRate",title:"转化率"},{data:"tradeIndex",title:"交易金额"},{data:"uvPrice",title:"UV价值"}];u?(o.clear(),o.rows.add(a).draw(),c.setOption({xAxis:{type:"category",boundaryGap:!0,data:p},series:[{data:r.uvIndex},{data:r.payByr},{data:r.payRate},{data:r.tradeIndex},{data:r.uvPrice}]})):l({data:a,cols:h},p,r,s,1),localStorage.setItem(d,JSON.stringify({tableData:a,tableClos:h,eData:r,edate:p,dateRange:s})),Object(n.b)()})}})})}function v(t,e){Object(n.b)("show");var a=d(t,e),r=a.time.replace("|","~"),s=localStorage.getItem(a.url),p=$(".chaqz-wrapper").length;if(s){var u=JSON.parse(s);if(p){var v=u.eData;o.clear(),o.rows.add(u.tableData).draw(),c.setOption({xAxis:{type:"category",boundaryGap:!0,data:u.edate},series:[{data:v.uvIndex},{data:v.tradeIndex},{data:v.payRate}]})}else l({data:u.tableData,cols:u.tableClos},u.edate,u.eData,u.dateRange,2);return Object(n.b)(),!1}chrome.storage.local.get("transitId",function(s){$.ajax({url:a.url,type:"GET",headers:{"transit-id":s.transitId},error:function(){Object(n.p)("获取数据失败请重试！"),Object(n.b)()},success:function(u){var v=JSON.parse(Object(n.a)(u.data)),m=d(t,e,1);$.ajax({url:m.url,type:"GET",headers:{"transit-id":s.transitId},error:function(){Object(n.p)("获取数据失败请重试！"),Object(n.b)()},success:function(t){var e=JSON.parse(Object(n.a)(t.data)),s=function(t,e){if(!t.length)return e;if(!e.length)return t;for(var a=t.length,n=0;n<a;n++){var r=t[n];for(let a=0;a<e.length;a++)r.keyword.value==e[a].keyword.value&&(t[n].uv=e[a].uv,e.splice(a,1))}return t.concat(e)}(v,e);if(!s.length)return Object(n.p)("获取数据失败，请重试！"),Object(n.b)(),!1;var d=[];s.forEach(function(t){var e=t.tradeIndex?t.tradeIndex.value:0;d.push(e)});var u=localStorage.getItem("chaqz_token");chrome.runtime.sendMessage({key:"getData",options:{url:i.a+"/api/v1/plugin/flowFormula?type=2",type:"POST",contentType:"application/json,charset=utf-8",headers:{Authorization:"Bearer "+u},data:JSON.stringify({exponent:d})}},function(t){for(var e=[],i=(t=t.data).length,d=[],u={tradeIndex:t,uvIndex:[],payRate:[]},v=0;v<i;v++){var m={};m.order=v+1,m.keywords=s[v].keyword?s[v].keyword.value:"",m.tradeIndex=t[v],m.platform="淘宝",m.uvIndex=s[v].uv?s[v].uv.value:"",u.uvIndex[v]=m.uvIndex,m.payRate=Object(n.f)(m.tradeIndex,m.uvIndex,1),u.payRate[v]=m.payRate,d.push(m.keywords),e.push(m)}var h=[{data:"order",title:"序号"},{data:"keywords",title:"关键词"},{data:"platform",title:"平台"},{data:"uvIndex",title:"访客数"},{data:"tradeIndex",title:"支付件数"},{data:"payRate",title:"支付转化率"}];p?(o.clear(),o.rows.add(e).draw(),c.setOption({xAxis:{type:"category",boundaryGap:!0,data:d},series:[{data:u.uvIndex},{data:u.tradeIndex},{data:u.payRate}]})):l({data:e,cols:h},d,u,r,2),localStorage.setItem(a,JSON.stringify({tableData:e,tableClos:h,eData:u,edate:d,dateRange:r})),Object(n.b)()})}})}})})}$(document).on("click",".chaqz-wrapper .switchData",function(){if($(this).hasClass("active"))return!1;var t=$(this).index();$(this).addClass("active").siblings().removeClass("active"),p(s,[0,2,1][t])}),$(document).on("click",".chaqz-wrapper .switchFlow",function(){if($(this).hasClass("active"))return!1;var t=$(this).index()+1;$(this).addClass("active").siblings().removeClass("active"),u(s,[0,2,1][t])}),$(document).on("click",".chaqz-wrapper .switchKey",function(){if($(this).hasClass("active"))return!1;var t=$(this).index()+1;$(this).addClass("active").siblings().removeClass("active"),v(s,[0,2,1][t])}),$(document).on("click",".chaqz-info-wrapper.pop .analyBtn",function(){var t=$(".chaqz-info-wrapper.pop .anayEditor").val(),e=$(".chaqz-info-wrapper.pop .good-tips");if(!t)return e.text("请输入url或者id"),e.addClass("alert"),!1;var a=Object(n.s)(t);if(!a)return e.text("请输入正确url或者id"),$(".chaqz-info-wrapper.pop .good-tips").addClass("alert"),!1;switch(s=a,$(this).index()){case 0:p(a,0);break;case 1:u(a,2);break;case 2:v(a,2)}$(".chaqz-info-wrapper.pop").hide()})}]);